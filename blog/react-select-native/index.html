<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/component---src-templates-blog-post-js.c9fe9451b6ad4a0bea3d.css">code[class*=language-],pre[class*=language-]{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.4em .8em;margin:.5em 0;overflow:auto;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' fill='rgba(0,0,0,.2)'%3E%3Cpath d='M0 50L50 0H0zM0 100h50l50-50V0z'/%3E%3C/svg%3E");background-size:1em 1em}code[class*=language-]{background:#000;color:#fff;box-shadow:-.3em 0 0 .3em #000,.3em 0 0 .3em #000}:not(pre)>code[class*=language-]{padding:.2em;border-radius:.3em;box-shadow:none;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#aaa}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.number,.token.property,.token.symbol,.token.tag{color:#0cf}.token.attr-name,.token.builtin,.token.char,.token.selector,.token.string{color:#ff0}.language-css .token.string,.toke.variable,.token.entity,.token.inserted,.token.operator,.token.url{color:#9acd32}.token.atrule,.token.attr-value,.token.keyword{color:#ff1493}.token.important,.token.regex{color:orange}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.deleted{color:red}.title{margin-bottom:1rem}.title h1{margin-bottom:4pt;color:#e5ffc8;line-height:1.3em}.title time{color:#ffb09e}.blog-post-content a,.blog-post-content em,.blog-post-content p,.blog-post-content p .language-text{font-size:.8rem;line-height:1.5rem;font-family:inherit}article code{background:transparent!important;box-shadow:none!important}.blog-post-content p code.language-text{padding:5pt 8pt;background:hsla(0,0%,100%,.05)!important}.gatsby-highlight pre{position:relative;max-width:100%}.gatsby-highlight pre[class*=language-]{background:rgba(255,176,158,.05);overflow:auto;float:left;min-width:100%}.gatsby-highlight pre[class*=language-] code,.gatsby-highlight pre[class*=language-] code span.token{font-family:monospace!important;font-size:.7rem!important}</style><meta name="generator" content="Gatsby 2.0.40"/><title data-react-helmet="true">Jani Anttonen - Using the native HTML select element (for real) in React</title><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#c0bdf0"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-b771874dd1ad682febbe.js"/><link as="script" rel="preload" href="/0-4d0db73a150a04b96992.js"/><link as="script" rel="preload" href="/app-5009bda5945acacef5b7.js"/><link as="script" rel="preload" href="/webpack-runtime-7e11f4588324b936f727.js"/><link rel="preload" href="/static/d/124/path---blog-react-select-native-bee-da8-zBnrSbYl5JQOD4Oa7z0Wydpu840.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="blog-post-container animated fadeIn"><article class="blog-post"><header class="title"><h1>Using the native HTML select element (for real) in React</h1><time>2018-07-02</time></header><div class="blog-post-content"><p><strong>Disclaimer: this is not a package for React Native. The name refers to the native HTML element.</strong></p>
<p>Lately in a project I wanted to make a progressive web app with a mobile-friendly UI with React. All was fine and dandy until I wanted to use native HTML form elements due to their good, integrated user experience with mobile devices.</p>
<p>You see, the HTML standard wasn't exactly made for handling JSON or any other structured data format. For example, our star of the day, select, <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/select">can only handle strings as values.</a> So, what do?</p>
<p>Easy. Just JSON.stringify() the input and JSON.parse() the output. Right?</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">ForFun</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>data
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>option <span class="token operator">=></span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span>
            <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
            <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token string">`option-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">}</span></span>
          <span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">></span></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Wrong. Well, partly right. There's still more work before we can fully use the select element in React. It's a shame really that to fully use it you need to make it a stateful, separate component.</p>
<p>In addition to the inconvenience with handling inputs and outputs, you also need to update the view with the selected label on change, and propagate the value back to the data handler. There were <a href="https://www.npmjs.com/package/react-select">some packages</a> available on npm that do just this â€“ aiming to modernize/<em>reactify</em> the select element.</p>
<p>The problem with a lot of these is that they don't use the native element, but rather approximate its behaviour with CSS + Javascript events, ending in a bloated mess of a package which results in a pre-styled drop-down menu. This, in my opinion, defeats the purpose.</p>
<p>After many iterations I had what the application needed. It was then I realized that I wanted to make this open source, since I couldn't find the correct package myself when I needed it. I tried to imagine all possible scenarios on how it could be used, implemented the possibilities to use it as an uncontrolled and a controlled input, and changed the class names and other identifiers to be more generic.</p>
<p>You can find more information on <code class="language-text">react-select-native</code> in the following links:</p>
<ul>
<li><a href="https://github.com/JaniAnttonen/react-select-native">https://github.com/JaniAnttonen/react-select-native</a></li>
<li><a href="https://www.npmjs.com/package/react-select-native">https://www.npmjs.com/package/react-select-native</a></li>
</ul>
<p>The package is still in development, but be sure to test it out and tell if there's any code that's breaking your application or could need some love.</p></div></article></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"blog-react-select-native-bee","path":"/blog/react-select-native"};window.dataPath="124/path---blog-react-select-native-bee-da8-zBnrSbYl5JQOD4Oa7z0Wydpu840";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-5009bda5945acacef5b7.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-cf808b81be9fc8b8751c.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js.c9fe9451b6ad4a0bea3d.css","/component---src-templates-blog-post-js-b771874dd1ad682febbe.js"],"component---src-pages-404-js":["/component---src-pages-404-js-3611a2dc702c1fe09907.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js.2a7a255f783c43ca383d.css","/component---src-pages-blog-js-b8f719f86bff43c5d56a.js"],"component---src-pages-books-js":["/component---src-pages-books-js.f0cc358ec2a55881203e.css","/component---src-pages-books-js-39e08ee61e997b3e722c.js"],"component---src-pages-contact-js":["/component---src-pages-contact-js.038629b0dd7986d3677c.css","/component---src-pages-contact-js-cd54648391c20eaf8249.js"],"component---src-pages-index-js":["/component---src-pages-index-js.614db03e75219d7a40b4.css","/component---src-pages-index-js-dbd123d045c131904b6e.js"],"component---src-pages-music-js":["/component---src-pages-music-js.614db03e75219d7a40b4.css","/component---src-pages-music-js-0dd50796f9a9447b2a6a.js"]};/*]]>*/</script><script src="/webpack-runtime-7e11f4588324b936f727.js" async=""></script><script src="/app-5009bda5945acacef5b7.js" async=""></script><script src="/0-4d0db73a150a04b96992.js" async=""></script><script src="/component---src-templates-blog-post-js-b771874dd1ad682febbe.js" async=""></script></body></html>