{"version":3,"sources":["webpack:///./src/pages/books.js","webpack:///./src/components/nav.js","webpack:///./src/components/intro.js","webpack:///./src/components/footer.js","webpack:///./src/components/layout.js"],"names":["setConfig","pureSFC","GoodReads","props","_this","_Component","call","this","state","nowReading","haveRead","componentDidMount","fetchGoodReadsAPI","updateCache","janiBooksCacheObject","window","localStorage","timestamp","Date","now","setItem","JSON","stringify","getCache","returnable","reading","read","cache","getItem","parse","lastCachePlusTwoDays","addDays","isAfter","setState","__html","HAVE_READ_WIDGET_ID","ky","text","readingRes","readingElem","Parser","body","declarations","init","value","readRes","readElem","render","_this$state","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","Fragment","className","dangerouslySetInnerHTML","class","Component","Books","_components_layout__WEBPACK_IMPORTED_MODULE_10__","Navigation","_ref","pathname","location","react_default","gatsby_link_default","to","Intro","href","target","Footer","Layout","children","data","Helmet_default","title","meta","name","content","lang","components_intro","components_nav","components_footer","propTypes","PropTypes","object"],"mappings":"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","file":"component---src-pages-books-js-fee5519d1846f8dd9bc3.js","sourcesContent":["import React, { Component } from 'react'\nimport { setConfig } from 'react-hot-loader'\nimport ky from 'ky'\nimport { Parser } from 'acorn'\nimport { addDays, isAfter } from 'date-fns'\n\nimport Layout from '../components/layout'\nimport './books.css'\n\nsetConfig({ pureSFC: true })\n\nclass GoodReads extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      nowReading: '',\n      haveRead: '',\n    }\n  }\n\n  async componentDidMount() {\n    await this.fetchGoodReadsAPI()\n  }\n\n  updateCache(janiBooksCacheObject) {\n    if (window.localStorage) {\n      janiBooksCacheObject.timestamp = new Date(Date.now())\n      window.localStorage.setItem(\n        'janianttonen.com:cache',\n        JSON.stringify(janiBooksCacheObject)\n      )\n    }\n  }\n\n  getCache() {\n    const returnable = { reading: false, read: false }\n    if (window.localStorage) {\n      let cache = window.localStorage.getItem('janianttonen.com:cache')\n      if (cache) {\n        cache = JSON.parse(cache)\n        const lastCachePlusTwoDays = addDays(new Date(cache.timestamp), 2)\n        const now = new Date(Date.now())\n        if (isAfter(lastCachePlusTwoDays, now)) {\n          returnable.reading = cache.reading\n          returnable.read = cache.read\n        }\n      }\n    }\n    return returnable\n  }\n\n  async fetchGoodReadsAPI() {\n    const cache = this.getCache()\n\n    if (cache.read && cache.reading) {\n      this.setState({\n        nowReading: { __html: cache.reading },\n        haveRead: { __html: cache.read },\n      })\n    } else {\n      const NOW_READING_WIDGET_ID = '1529572489'\n      const HAVE_READ_WIDGET_ID = '1529534706'\n\n      const readingRes = await ky(\n        `https://cors-anywhere.herokuapp.com/https://www.goodreads.com/review/grid_widget/73247619.Jani's%20currently-reading%20book%20montage?cover_size=medium&hide_link=true&hide_title=true&num_books=6&order=a&shelf=currently-reading&sort=date_added&widget_id=${NOW_READING_WIDGET_ID}`\n      ).text()\n      const readingElem = {\n        __html: Parser.parse(readingRes).body[0].declarations[0].init.value,\n      }\n\n      const readRes = await ky(\n        `https://cors-anywhere.herokuapp.com/https://www.goodreads.com/review/grid_widget/73247619.Jani's%20read%20book%20montage?cover_size=medium&hide_link=true&hide_title=true&num_books=9&order=a&shelf=read&sort=date_added&widget_id=${HAVE_READ_WIDGET_ID}`\n      ).text()\n      const readElem = {\n        __html: Parser.parse(readRes).body[0].declarations[0].init.value,\n      }\n\n      this.updateCache({ reading: readingElem.__html, read: readElem.__html })\n      this.setState({\n        nowReading: readingElem,\n        haveRead: readElem,\n      })\n    }\n  }\n\n  render() {\n    const { nowReading, haveRead } = this.state\n    return (\n      <React.Fragment>\n        <p>Books that I'm currently reading:</p>\n        {nowReading ? (\n          <section\n            className=\"now-reading\"\n            dangerouslySetInnerHTML={nowReading}\n          />\n        ) : (\n          <section className=\"now-reading\">\n            <div class=\"gr_grid_book_container\" />\n            <div class=\"gr_grid_book_container\" />\n            <div class=\"gr_grid_book_container\" />\n          </section>\n        )}\n\n        <p>Books that I've read:</p>\n        {haveRead ? (\n          <section className=\"read\" dangerouslySetInnerHTML={haveRead} />\n        ) : (\n          <section className=\"read\">\n            <div class=\"gr_grid_book_container\" />\n            <div class=\"gr_grid_book_container\" />\n            <div class=\"gr_grid_book_container\" />\n          </section>\n        )}\n      </React.Fragment>\n    )\n  }\n}\n\nconst Books = props => (\n  <Layout {...props}>\n    <div className=\"animated fadeIn flex column\">\n      <GoodReads />\n    </div>\n  </Layout>\n)\n\nexport default Books\n","import React from 'react'\nimport Link from 'gatsby-link'\n//import home from './home.svg'\nimport './nav.css'\n\nconst Navigation = ({ location: { pathname } }) => (\n  <nav className={`links${pathname === '/' ? ' animated fadeInDown' : ''}`}>\n    {/* {pathname !== '/' && (\n      <div className=\"link\">\n        <Link to=\"/\">\n          <img src={home} className=\"icon home\" />\n        </Link>\n      </div>\n    )} */}\n    <div className={`link${pathname === '/blog' ? ' active' : ''}`}>\n      <Link to=\"/blog\">Blog</Link>\n    </div>\n    <div className={`link${pathname === '/contact' ? ' active' : ''}`}>\n      <Link to=\"/contact\">Contact</Link>\n    </div>\n    <div className={`link${pathname === '/music' ? ' active' : ''}`}>\n      <Link to=\"/music\">Music</Link>\n    </div>\n    <div className={`link${pathname === '/books' ? ' active' : ''}`}>\n      <Link to=\"/books\">Books</Link>\n    </div>\n  </nav>\n)\n\nexport default Navigation\n","import React from 'react'\nimport './intro.css'\nimport './nav.css'\n\nconst Intro = ({ location }) =>\n  location &&\n  location.pathname === '/' && (\n    <header className=\"intro animated fadeIn\">\n      <span className=\"animated fadeIn\">\n        <strong>Jani Anttonen</strong> â€“ A creative mind with a broad view of\n        cutting edge technologies. Expert in designing and building web\n        applications with over 10 years of experience. Currently working on\n        distributed systems, and on{' '}\n        <a href=\"https://marshallai.com\" target=\"_blank\">\n          physical security at MarshallAI.\n        </a>{' '}\n      </span>\n    </header>\n  )\n\nexport default Intro\n","import React from 'react'\nimport Link from 'gatsby-link'\nimport './nav.css'\nimport './footer.css'\n\nconst Footer = ({location: { pathname }}) => pathname !== \"/\" ? <footer><div className=\"link highlight\"><Link to=\"/\">Back to homepage</Link></div></footer> : null\n\nexport default Footer","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Helmet from 'react-helmet'\nimport 'animate.css'\n\nimport Navigation from './nav'\nimport Intro from './intro'\nimport Footer from './footer'\n\nimport './layout.css'\n\nconst Layout = ({ children, data, location }) => (\n  <div className=\"app\">\n    <div className=\"wrapper\">\n      <Helmet\n        title=\"Jani Anttonen\"\n        meta={[\n          { name: 'description', content: 'Jani Anttonen' },\n          {\n            name: 'keywords',\n            content:\n              'Software Developer, Developer, Jani Anttonen, Machine Learning, AI, ML, Data Science, React, Javascript, Node, NodeJS, Python, Golang, Go, Finland, Finnish, Turku, Helsinki',\n          },\n        ]}\n      >\n        <html lang=\"en\" />\n      </Helmet>\n      <Intro location={location} />\n      <Navigation location={location} />\n      <main className=\"subpage\">{children}</main>\n      <Footer location={location} />\n    </div>\n    <noscript>This website requires Javascript to run.</noscript>\n  </div>\n)\n\nLayout.propTypes = {\n  children: PropTypes.object,\n}\n\nexport default Layout\n\nexport const query = graphql`\n  query SiteTitleQuery {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n  }\n`\n"],"sourceRoot":""}